<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - SESMine Platform | Smart Engineering Solutions</title>
  <meta name="description" content="SESMine Dashboard - Smart Engineering Solutions for Mining. Access all hubs, manage projects, and optimize operations.">
  
  <!-- External Resources -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap">
  <link rel="icon" type="image/x-icon" href="https://www.sesmine.com/favicon.ico">
  
  <!-- Chart.js for Analytics -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <style>
  :root {
      --primary-dark: #1a1a1a;
      --primary-light: #f4f4f2;
      --accent-primary: #5c6b50;
      --accent-secondary: #8c9a8c;
      --accent-blue: #3182ce;
      --accent-success: #38a169;
      --accent-warning: #dd6b20;
      --accent-error: #e53e3e;
      --accent-gold: #d69e2e;
      
      --gradient-primary: linear-gradient(135deg, var(--primary-dark) 0%, var(--accent-primary) 50%, var(--accent-blue) 100%);
      --gradient-accent: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
      --gradient-hero: linear-gradient(135deg, rgba(26, 26, 26, 0.95) 0%, rgba(92, 107, 80, 0.8) 50%, rgba(49, 130, 206, 0.7) 100%);
      
      --glass-bg: rgba(255, 255, 255, 0.1);
      --glass-border: rgba(255, 255, 255, 0.2);
      --dark-glass: rgba(26, 26, 26, 0.9);
      
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
      --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.12);
      --shadow-lg: 0 16px 40px rgba(0, 0, 0, 0.16);
      --shadow-xl: 0 24px 60px rgba(0, 0, 0, 0.2);
      
      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-2xl: 3rem;
      --space-3xl: 4rem;
      
      --radius-sm: 6px;
      --radius-md: 12px;
      --radius-lg: 18px;
      --radius-xl: 24px;
      
      --transition-smooth: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
  }

  body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: var(--primary-dark);
      background: var(--primary-light);
      overflow-x: hidden;
      font-feature-settings: "kern" 1, "liga" 1;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
  }

  /* Header */
  .main-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      background: var(--dark-glass);
      backdrop-filter: blur(20px) saturate(180%);
      border-bottom: 1px solid rgba(92, 107, 80, 0.3);
      box-shadow: var(--shadow-sm);
  }

  .header-container {
      max-width: 1440px;
      margin: 0 auto;
      padding: var(--space-md) var(--space-xl);
      display: flex;
      align-items: center;
      justify-content: space-between;
  }

  .logo-section {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      text-decoration: none;
      color: var(--primary-light);
      font-weight: 700;
      font-size: 1.5rem;
      transition: all var(--transition-smooth);
  }

  .logo-icon {
      width: 48px;
      height: 48px;
      background: var(--gradient-accent);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      box-shadow: var(--shadow-md);
  }

  .logo-text {
      display: flex;
      flex-direction: column;
  }

  .company-name {
      font-size: 1.5rem;
      font-weight: 800;
      letter-spacing: -0.02em;
      color: var(--primary-light);
  }

  .company-tagline {
      font-size: 0.75rem;
      opacity: 0.8;
      font-weight: 500;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: var(--accent-secondary);
  }

  .main-nav {
      display: flex;
      gap: var(--space-xl);
      align-items: center;
  }

  .nav-link {
      color: rgba(244, 244, 242, 0.85);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-sm);
      transition: all var(--transition-smooth);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
  }

  .nav-link:hover,
  .nav-link.active {
      color: var(--primary-light);
      background: var(--glass-bg);
  }

  .nav-dropdown {
      position: relative;
  }

  .dropdown-toggle {
      background: none;
      border: none;
      color: rgba(244, 244, 242, 0.85);
      font-weight: 500;
      font-size: 0.95rem;
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-sm);
      transition: all var(--transition-smooth);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: var(--space-sm);
  }

  .dropdown-toggle:hover {
      color: var(--primary-light);
      background: var(--glass-bg);
  }

  .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-xl);
      border: 1px solid #e2e8f0;
      min-width: 220px;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all var(--transition-smooth);
      margin-top: var(--space-sm);
  }

  .nav-dropdown:hover .dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
  }

  .dropdown-item {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-md);
      color: var(--primary-dark);
      text-decoration: none;
      transition: all var(--transition-smooth);
      border-bottom: 1px solid #f1f5f9;
  }

  .dropdown-item:last-child {
      border-bottom: none;
  }

  .dropdown-item:hover {
      background: #f8fafc;
      color: var(--accent-primary);
  }

  .header-actions {
      display: flex;
      gap: var(--space-md);
      align-items: center;
  }

  .search-container {
      position: relative;
      display: flex;
      align-items: center;
  }

  .search-input {
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-md);
      padding: var(--space-sm) var(--space-md) var(--space-sm) 2.5rem;
      color: var(--primary-light);
      font-size: 0.9rem;
      width: 250px;
      backdrop-filter: blur(10px);
      transition: all var(--transition-smooth);
  }

  .search-input::placeholder {
      color: rgba(244, 244, 242, 0.6);
  }

  .search-input:focus {
      outline: none;
      border-color: var(--accent-primary);
      background: rgba(255, 255, 255, 0.15);
      width: 300px;
  }

  .search-icon {
      position: absolute;
      left: var(--space-md);
      color: rgba(244, 244, 242, 0.6);
      font-size: 0.9rem;
  }

  .header-btn {
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      color: var(--primary-light);
      padding: var(--space-sm);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all var(--transition-smooth);
      backdrop-filter: blur(10px);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
  }

  .header-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
  }

  .user-menu {
      position: relative;
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      cursor: pointer;
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-md);
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
      transition: all var(--transition-smooth);
  }

  .user-menu:hover {
      background: rgba(255, 255, 255, 0.2);
  }

  .user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--gradient-accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: var(--primary-dark);
      font-size: 0.9rem;
  }

  .user-info {
      display: flex;
      flex-direction: column;
  }

  .user-name {
      font-weight: 600;
      color: var(--primary-light);
      font-size: 0.9rem;
  }

  .user-email {
      font-size: 0.75rem;
      color: rgba(244, 244, 242, 0.8);
  }

  .user-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      background: white;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-xl);
      border: 1px solid #e2e8f0;
      min-width: 200px;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all var(--transition-smooth);
      margin-top: var(--space-sm);
  }

  .user-menu:hover .user-dropdown {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
  }

  /* Main Content */
  .main-content {
      margin-top: 80px;
      min-height: calc(100vh - 80px);
  }

  .dashboard-container {
      padding: var(--space-2xl);
      max-width: 1440px;
      margin: 0 auto;
  }

  /* Welcome Section */
  .welcome-section {
      background: var(--gradient-primary);
      color: white;
      padding: var(--space-3xl);
      border-radius: var(--radius-xl);
      margin-bottom: var(--space-2xl);
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-xl);
  }

  .welcome-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
          url('https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80') center/cover;
      opacity: 0.1;
      z-index: 0;
  }

  .welcome-content {
      position: relative;
      z-index: 1;
      text-align: center;
  }

  .welcome-title {
      font-size: 3.5rem;
      font-weight: 800;
      margin-bottom: var(--space-lg);
      background: linear-gradient(135deg, white, rgba(255, 255, 255, 0.8), var(--accent-gold));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.2;
      letter-spacing: -0.02em;
      animation: titleGlow 3s ease-in-out infinite alternate;
  }

  @keyframes titleGlow {
      0% { filter: brightness(1); }
      100% { filter: brightness(1.1); }
  }

  .welcome-subtitle {
      font-size: 1.25rem;
      opacity: 0.9;
      margin-bottom: var(--space-2xl);
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.6;
  }

  .welcome-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: var(--space-xl);
      margin-top: var(--space-xl);
  }

  .welcome-stat {
      text-align: center;
      padding: var(--space-lg);
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-lg);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: all var(--transition-smooth);
      cursor: pointer;
  }

  .welcome-stat:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-5px);
  }

  .welcome-stat-value {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: var(--space-sm);
      font-family: 'Inter', monospace;
      color: var(--accent-gold);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  .welcome-stat-label {
      font-size: 0.875rem;
      opacity: 0.9;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      font-weight: 600;
  }

  /* Quick Actions */
  .quick-actions {
      background: white;
      border-radius: var(--radius-xl);
      padding: var(--space-2xl);
      box-shadow: var(--shadow-md);
      border: 1px solid #e2e8f0;
      margin-bottom: var(--space-2xl);
  }

  .quick-actions-title {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: var(--space-xl);
      display: flex;
      align-items: center;
      gap: var(--space-md);
  }

  .quick-actions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: var(--space-lg);
  }

  .quick-action-btn {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      padding: var(--space-lg);
      background: #f8fafc;
      border: 2px solid #e2e8f0;
      border-radius: var(--radius-lg);
      text-decoration: none;
      color: var(--primary-dark);
      font-weight: 600;
      transition: all var(--transition-smooth);
      position: relative;
      overflow: hidden;
  }

  .quick-action-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(92, 107, 80, 0.1), transparent);
      transition: left 0.5s ease;
  }

  .quick-action-btn:hover::before {
      left: 100%;
  }

  .quick-action-btn:hover {
      background: #f1f5f9;
      border-color: var(--accent-primary);
      color: var(--accent-primary);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
  }

  .quick-action-btn i {
      font-size: 1.25rem;
      width: 24px;
      text-align: center;
  }

  /* Hubs Grid */
  .hubs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
      gap: var(--space-2xl);
      margin-bottom: var(--space-2xl);
  }

  .hub-card {
      background: white;
      border-radius: var(--radius-xl);
      padding: var(--space-2xl);
      box-shadow: var(--shadow-md);
      border: 1px solid #e2e8f0;
      transition: all var(--transition-smooth);
      position: relative;
      overflow: hidden;
      cursor: pointer;
  }

  .hub-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-accent);
      transform: scaleX(0);
      transition: transform var(--transition-smooth);
  }

  .hub-card:hover::before {
      transform: scaleX(1);
  }

  .hub-card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-xl);
      border-color: var(--accent-primary);
  }

  .hub-icon {
      width: 80px;
      height: 80px;
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      margin-bottom: var(--space-lg);
      box-shadow: var(--shadow-lg);
      transition: all var(--transition-smooth);
      position: relative;
      overflow: hidden;
  }

  .hub-card:hover .hub-icon {
      transform: scale(1.1) rotate(5deg);
  }

  .hub-icon::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transform: rotate(45deg);
      transition: transform 0.6s ease;
  }

  .hub-card:hover .hub-icon::before {
      transform: translateX(100%) translateY(100%) rotate(45deg);
  }

  .hub-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: var(--space-md);
  }

  .hub-description {
      color: #64748b;
      font-size: 1rem;
      line-height: 1.6;
      margin-bottom: var(--space-lg);
  }

  .hub-features {
      list-style: none;
      margin-bottom: var(--space-lg);
  }

  .hub-features li {
      padding: var(--space-sm) 0;
      color: #475569;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: var(--space-md);
      transition: all var(--transition-smooth);
  }

  .hub-features li:hover {
      color: var(--accent-primary);
      transform: translateX(5px);
  }

  .feature-icon {
      width: 16px;
      height: 16px;
      color: var(--accent-success);
      flex-shrink: 0;
  }

  .hub-actions {
      display: flex;
      gap: var(--space-md);
  }

  .btn {
      padding: var(--space-md) var(--space-xl);
      border-radius: var(--radius-md);
      text-decoration: none;
      font-weight: 600;
      transition: all var(--transition-smooth);
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      border: none;
      cursor: pointer;
      font-size: 0.95rem;
  }

  .btn-primary {
      background: var(--gradient-accent);
      color: var(--primary-dark);
      box-shadow: var(--shadow-sm);
  }

  .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
  }

  /* Recent Activity */
  .recent-activity {
      background: white;
      border-radius: var(--radius-xl);
      padding: var(--space-2xl);
      box-shadow: var(--shadow-md);
      border: 1px solid #e2e8f0;
      margin-bottom: var(--space-2xl);
  }

  .activity-title {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: var(--space-xl);
      display: flex;
      align-items: center;
      gap: var(--space-md);
  }

  .activity-list {
      list-style: none;
  }

  .activity-item {
      display: flex;
      align-items: center;
      gap: var(--space-lg);
      padding: var(--space-lg);
      border-radius: var(--radius-md);
      margin-bottom: var(--space-sm);
      transition: all var(--transition-smooth);
      cursor: pointer;
  }

  .activity-item:hover {
      background: #f8fafc;
      transform: translateX(5px);
  }

  .activity-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      color: white;
      flex-shrink: 0;
      box-shadow: var(--shadow-sm);
  }

  .activity-content {
      flex: 1;
  }

  .activity-text {
      font-weight: 600;
      color: var(--primary-dark);
      margin-bottom: var(--space-xs);
      font-size: 0.95rem;
  }

  .activity-time {
      font-size: 0.875rem;
      color: #64748b;
  }

  /* Analytics Section */
  .analytics-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: var(--space-xl);
      margin-bottom: var(--space-2xl);
  }

  .analytics-card {
      background: white;
      border-radius: var(--radius-xl);
      padding: var(--space-xl);
      box-shadow: var(--shadow-md);
      border: 1px solid #e2e8f0;
  }

  .analytics-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: var(--space-lg);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
  }

  .chart-container {
      position: relative;
      height: 300px;
      width: 100%;
  }

  /* Responsive Design */
  @media (max-width: 1024px) {
      .main-nav {
          display: none;
      }

      .header-container {
          padding: var(--space-md);
      }

      .search-input {
          width: 200px;
      }

      .search-input:focus {
          width: 250px;
      }

      .dashboard-container {
          padding: var(--space-lg);
      }

      .welcome-title {
          font-size: 2.5rem;
      }

      .hubs-grid {
          grid-template-columns: 1fr;
      }

      .quick-actions-grid {
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }
  }

  @media (max-width: 768px) {
      .dashboard-container {
          padding: var(--space-md);
      }

      .welcome-section {
          padding: var(--space-xl);
      }

      .welcome-title {
          font-size: 2rem;
      }

      .welcome-stats {
          grid-template-columns: repeat(2, 1fr);
          gap: var(--space-md);
      }

      .quick-actions-grid {
          grid-template-columns: 1fr;
      }

      .analytics-section {
          grid-template-columns: 1fr;
      }

      .user-info {
          display: none;
      }

      .search-container {
          display: none;
      }
  }

  /* Loading States */
  .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-2xl);
      color: #64748b;
  }

  .spinner {
      width: 32px;
      height: 32px;
      border: 3px solid #e2e8f0;
      border-top: 3px solid var(--accent-primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: var(--space-md);
  }

  @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
  }

  /* Accessibility */
  @media (prefers-reduced-motion: reduce) {
      * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
      }
  }

  @media (prefers-contrast: high) {
      .welcome-title {
          -webkit-text-fill-color: white;
          background: none;
      }

      .hub-card {
          border-width: 2px;
      }
  }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="main-header" id="mainHeader">
      <div class="header-container">
          <a href="index.html" class="logo-section">
              <div class="logo-icon">üèîÔ∏è</div>
              <div class="logo-text">
                  <div class="company-name">SESMine</div>
                  <div class="company-tagline">Smart Engineering Solutions</div>
              </div>
          </a>
          
          <nav class="main-nav" id="mainNav">
              <a href="home.html" class="nav-link active">
                  <i class="fas fa-home"></i> Dashboard
              </a>
              <div class="nav-dropdown">
                  <button class="dropdown-toggle">
                      <i class="fas fa-th-large"></i> Hubs <i class="fas fa-chevron-down"></i>
                  </button>
                  <div class="dropdown-menu">
                      <a href="engineering-hub.html" class="dropdown-item">
                          <i class="fas fa-hard-hat"></i> Engineering Hub
                      </a>
                      <a href="analytics-platform.html" class="dropdown-item">
                          <i class="fas fa-chart-area"></i> Analytics Platform
                      </a>
                      <a href="economics-hub.html" class="dropdown-item">
                          <i class="fas fa-coins"></i> Economics Hub
                      </a>
                      <a href="innovation-technology-hub.html" class="dropdown-item">
                          <i class="fas fa-rocket"></i> Innovation & Technology
                      </a>
                      <a href="procurement-hub.html" class="dropdown-item">
                          <i class="fas fa-truck"></i> Procurement Hub
                      </a>
                      <a href="consulting-hub.html" class="dropdown-item">
                          <i class="fas fa-user-tie"></i> Consulting Hub
                      </a>
                      <a href="training-education-hub.html" class="dropdown-item">
                          <i class="fas fa-graduation-cap"></i> Training & Education
                      </a>
                  </div>
              </div>
              <a href="about.html" class="nav-link">
                  <i class="fas fa-info-circle"></i> About
              </a>
              <a href="contact.html" class="nav-link">
                  <i class="fas fa-phone"></i> Contact
              </a>
          </nav>
          
          <div class="header-actions" id="headerActions">
              <div class="search-container">
                  <i class="fas fa-search search-icon"></i>
                  <input type="text" class="search-input" placeholder="Search hubs, features..." id="globalSearch">
              </div>
              <button class="header-btn" title="Notifications" onclick="showNotifications()">
                  <i class="fas fa-bell"></i>
              </button>
              <button class="header-btn" title="Settings" onclick="window.location.href='setting.html'">
                  <i class="fas fa-cog"></i>
              </button>
              <div class="user-menu" id="userMenu">
                  <div class="user-avatar" id="userAvatar">U</div>
                  <div class="user-info" id="userInfo">
                      <div class="user-name" id="userName">Loading...</div>
                      <div class="user-email" id="userEmail">Loading...</div>
                  </div>
                  <div class="user-dropdown">
                      <a href="setting.html" class="dropdown-item">
                          <i class="fas fa-cog"></i> Settings
                      </a>
                      <button class="dropdown-item" onclick="logout()" style="width: 100%; text-align: left; background: none; border: none; cursor: pointer;">
                          <i class="fas fa-sign-out-alt"></i> Logout
                      </button>
                  </div>
              </div>
          </div>
      </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
      <div class="dashboard-container">
          
          <!-- Welcome Section -->
          <div class="welcome-section">
              <div class="welcome-content">
                  <h1 class="welcome-title" id="welcomeTitle">Welcome to SESMine Platform</h1>
                  <p class="welcome-subtitle">
                      Your comprehensive Smart Engineering Solutions for Mining dashboard. Access all platforms, 
                      manage projects, and optimize operations from one central location.
                  </p>
                  
                  <div class="welcome-stats">
                      <div class="welcome-stat" onclick="showHubsOverview()">
                          <div class="welcome-stat-value" id="activeHubs">8</div>
                          <div class="welcome-stat-label">Active Hubs</div>
                      </div>
                      <div class="welcome-stat" onclick="showSupportInfo()">
                          <div class="welcome-stat-value">24/7</div>
                          <div class="welcome-stat-label">Support</div>
                      </div>
                      <div class="welcome-stat" onclick="showUptimeStats()">
                          <div class="welcome-stat-value" id="systemUptime">99.9%</div>
                          <div class="welcome-stat-label">Uptime</div>
                      </div>
                      <div class="welcome-stat" onclick="showCostSavings()">
                          <div class="welcome-stat-value" id="costSaved">$5.2M</div>
                          <div class="welcome-stat-label">Cost Saved</div>
                      </div>
                  </div>
              </div>
          </div>

          <!-- Quick Actions -->
          <div class="quick-actions">
              <h2 class="quick-actions-title">
                  ‚ö° Quick Actions
              </h2>
              <div class="quick-actions-grid">
                  <a href="engineering-hub.html" class="quick-action-btn" onclick="trackQuickAction('cost_estimation')">
                      <i class="fas fa-calculator"></i>
                      Cost Estimation
                  </a>
                  <a href="analytics-platform.html" class="quick-action-btn" onclick="trackQuickAction('analytics')">
                      <i class="fas fa-chart-line"></i>
                      View Analytics
                  </a>
                  <a href="procurement-hub.html" class="quick-action-btn" onclick="trackQuickAction('procurement')">
                      <i class="fas fa-shopping-cart"></i>
                      Procurement
                  </a>
                  <a href="training-education-hub.html" class="quick-action-btn" onclick="trackQuickAction('training')">
                      <i class="fas fa-book-open"></i>
                      Training Center
                  </a>
                  <a href="consulting-hub.html" class="quick-action-btn" onclick="trackQuickAction('consulting')">
                      <i class="fas fa-handshake"></i>
                      Expert Consulting
                  </a>
                  <a href="admin-dashboard.html" class="quick-action-btn" onclick="trackQuickAction('admin')" id="adminQuickAction">
                      <i class="fas fa-users-cog"></i>
                      Admin Panel
                  </a>
              </div>
          </div>

          <!-- Analytics Section -->
          <div class="analytics-section">
              <div class="analytics-card">
                  <h3 class="analytics-title">
                      <i class="fas fa-chart-line"></i>
                      Platform Usage
                  </h3>
                  <div class="chart-container">
                      <canvas id="usageChart"></canvas>
                  </div>
              </div>
              
              <div class="analytics-card">
                  <h3 class="analytics-title">
                      <i class="fas fa-pie-chart"></i>
                      Hub Distribution
                  </h3>
                  <div class="chart-container">
                      <canvas id="hubChart"></canvas>
                  </div>
              </div>
          </div>

          <!-- Main Hubs Grid -->
          <div class="hubs-grid">
              <!-- Engineering Hub -->
              <div class="hub-card" onclick="navigateToHub('engineering-hub.html', 'Engineering Hub')">
                  <div class="hub-icon" style="background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));">
                      ‚õëÔ∏è
                  </div>
                  <h3 class="hub-title">Engineering Hub</h3>
                  <p class="hub-description">Advanced engineering solutions with AACE cost estimation, project management, and technical analysis tools.</p>
                  <ul class="hub-features">
                      <li><i class="fas fa-check feature-icon"></i>AACE Cost Estimation</li>
                      <li><i class="fas fa-check feature-icon"></i>Project Management</li>
                      <li><i class="fas fa-check feature-icon"></i>Technical Analysis</li>
                      <li><i class="fas fa-check feature-icon"></i>Equipment Database</li>
                  </ul>
                  <div class="hub-actions">
                      <button class="btn btn-primary">
                          <i class="fas fa-external-link-alt"></i>
                          Launch Hub
                      </button>
                  </div>
              </div>

              <!-- Analytics Platform -->
              <div class="hub-card" onclick="navigateToHub('analytics-platform.html', 'Analytics Platform')">
                  <div class="hub-icon" style="background: linear-gradient(135deg, var(--accent-success), #22c55e);">
                      üìä
                  </div>
                  <h3 class="hub-title">Analytics Platform</h3>
                  <p class="hub-description">Comprehensive analytics and data visualization platform with real-time monitoring and predictive modeling.</p>
                  <ul class="hub-features">
                      <li><i class="fas fa-check feature-icon"></i>Real-time Analytics</li>
                      <li><i class="fas fa-check feature-icon"></i>Predictive Modeling</li>
                      <li><i class="fas fa-check feature-icon"></i>Data Visualization</li>
                      <li><i class="fas fa-check feature-icon"></i>Performance Monitoring</li>
                  </ul>
                  <div class="hub-actions">
                      <button class="btn btn-primary">
                          <i class="fas fa-chart-line"></i>
                          View Analytics
                      </button>
                  </div>
              </div>

              <!-- Economics Hub -->
              <div class="hub-card" onclick="navigateToHub('economics-hub.html', 'Economics Hub')">
                  <div class="hub-icon" style="background: linear-gradient(135deg, var(--accent-gold), #f59e0b);">
                      üí∞
                  </div>
                  <h3 class="hub-title">Economics Hub</h3>
                  <p class="hub-description">Financial modeling, economic analysis, and market intelligence for mining operations and investments.</p>
                  <ul class="hub-features">
                      <li><i class="fas fa-check feature-icon"></i>Financial Modeling</li>
                      <li><i class="fas fa-check feature-icon"></i>Economic Analysis</li>
                      <li><i class="fas fa-check feature-icon"></i>Market Intelligence</li>
                      <li><i class="fas fa-check feature-icon"></i>Investment Analysis</li>
                  </ul>
                  <div class="hub-actions">
                      <button class="btn btn-primary">
                          <i class="fas fa-dollar-sign"></i>
                          Launch Hub
                      </button>
                  </div>
              </div>

              <!-- Innovation & Technology Hub -->
              <div class="hub-card" onclick="navigateToHub('innovation-technology-hub.html', 'Innovation Hub')">
                  <div class="hub-icon" style="background: linear-gradient(135deg, var(--accent-blue), #3b82f6);">
                      üöÄ
                  </div>
                  <h3 class="hub-title">Innovation & Technology</h3>
                  <p class="hub-description">Cutting-edge technology solutions, innovation management, and digital transformation for mining.</p>
                  <ul class="hub-features">
                      <li><i class="fas fa-check feature-icon"></i>Technology Innovation</li>
                      <li><i class="fas fa-check feature-icon"></i>Digital Solutions</li>
                      <li><i class="fas fa-check feature-icon"></i>R&D Management</li>
                      <li><i class="fas fa-check feature-icon"></i>Tech Integration</li>
                  </ul>
                  <div class="hub-actions">
                      <button class="btn btn-primary">
                          <i class="fas fa-lightbulb"></i>
                          Explore Innovation
                      </button>
                  </div>
              </div>

              <!-- Procurement Hub -->
              <div class="hub-card" onclick="navigateToHub('procurement-hub.html', 'Procurement Hub')">
                  <div class="hub-icon" style="background: linear-gradient(135deg, var(--accent-warning), #f97316);">
                      üöõ
                  </div>
                  <h3 class="hub-title">Procurement Hub</h3>
                  <p class="hub-description">Strategic procurement management, supplier networks, and supply chain optimization solutions.</p>
                  <ul class="hub-features">
                      <li><i class="fas fa-check feature-icon"></i>Supplier Management</li>
                      <li><i class="fas fa-check feature-icon"></i>Supply Chain Optimization</li>
                      <li><i class="fas fa-check feature-icon"></i>Contract Management</li>
                      <li><i class="fas fa-check feature-icon"></i>Cost Analysis</li>
                  </ul>
                  <div class="hub-actions">
                      <button class="btn btn-primary">
                          <i class="fas fa-shipping-fast"></i>
                          Launch Hub
                      </button>
                  </div>
              </div>

              <!-- Consulting Hub -->
              <div class="hub-card" onclick="navigateToHub('consulting-hub.html', 'Consulting Hub')">
                  <div class="hub-icon" style="background: linear-gradient(135deg, var(--accent-error), #ef4444);">
                      üëî
                  </div>
                  <h3 class="hub-title">Consulting Hub</h3>
                  <p class="hub-description">Expert consulting services, strategic advisory, and professional guidance for mining projects.</p>
                  <ul class="hub-features">
                      <li><i class="fas fa-check feature-icon"></i>Expert Consulting</li>
                      <li><i class="fas fa-check feature-icon"></i>Strategic Advisory</li>
                      <li><i class="fas fa-check feature-icon"></i>Project Guidance</li>
                      <li><i class="fas fa-check feature-icon"></i>Professional Services</li>
                  </ul>
                  <div class="hub-actions">
                      <button class="btn btn-primary">
                          <i class="fas fa-handshake"></i>
                          Get Consulting
                      </button>
                  </div>
              </div>

              <!-- Training & Education Hub -->
              <div class="hub-card" onclick="navigateToHub('training-education-hub.html', 'Training Hub')">
                  <div class="hub-icon" style="background: linear-gradient(135deg, #10b981, #059669);">
                      üéì
                  </div>
                  <h3 class="hub-title">Training & Education</h3>
                  <p class="hub-description">Comprehensive training programs, educational resources, and professional development for mining professionals.</p>
                  <ul class="hub-features">
                      <li><i class="fas fa-check feature-icon"></i>Professional Training</li>
                      <li><i class="fas fa-check feature-icon"></i>Educational Resources</li>
                      <li><i class="fas fa-check feature-icon"></i>Certification Programs</li>
                      <li><i class="fas fa-check feature-icon"></i>Skills Development</li>
                  </ul>
                  <div class="hub-actions">
                      <button class="btn btn-primary">
                          <i class="fas fa-book-open"></i>
                          Start Learning
                      </button>
                  </div>
              </div>

              <!-- Admin Dashboard (conditional) -->
              <div class="hub-card" id="adminHubCard" onclick="navigateToHub('admin-dashboard.html', 'Admin Dashboard')" style="display: none;">
                  <div class="hub-icon" style="background: linear-gradient(135deg, #6b7280, #4b5563);">
                      üõ°Ô∏è
                  </div>
                  <h3 class="hub-title">Admin Dashboard</h3>
                  <p class="hub-description">Administrative controls, system management, user administration, and platform configuration tools.</p>
                  <ul class="hub-features">
                      <li><i class="fas fa-check feature-icon"></i>User Management</li>
                      <li><i class="fas fa-check feature-icon"></i>System Administration</li>
                      <li><i class="fas fa-check feature-icon"></i>Security Controls</li>
                      <li><i class="fas fa-check feature-icon"></i>Platform Configuration</li>
                  </ul>
                  <div class="hub-actions">
                      <button class="btn btn-primary">
                          <i class="fas fa-server"></i>
                          Admin Panel
                      </button>
                  </div>
              </div>
          </div>

          <!-- Recent Activity -->
          <div class="recent-activity">
              <h2 class="activity-title">
                  üìã Recent Activity
              </h2>
              <ul class="activity-list" id="activityList">
                  <li class="activity-item">
                      <div class="loading">
                          <div class="spinner"></div>
                          Loading recent activity...
                      </div>
                  </li>
              </ul>
          </div>

      </div>
  </main>

  <!-- Scripts -->
  <script src="config.js"></script>
  <script src="data-manager.js"></script>
  <script src="notification-system.js"></script>
  <script src="auth-system.js"></script>
  
  <script>
  // Dashboard JavaScript
  let dashboardCharts = {};
  let activityData = [];

  // Initialize dashboard
  document.addEventListener('DOMContentLoaded', function() {
      console.log('üè† SESMine Dashboard Initializing...');
      initializeDashboard();
  });

  function initializeDashboard() {
      // Wait for auth system to be ready
      setTimeout(() => {
          checkAuthenticationAndSetup();
      }, 100);
  }

  function checkAuthenticationAndSetup() {
      // Require authentication
      if (typeof window.requireAuth === 'function') {
          window.requireAuth();
      }

      // Check if user is authenticated
      if (window.SESMineAuth && window.SESMineAuth.instance) {
          const currentUser = window.SESMineAuth.instance.currentUser;
          if (currentUser) {
              setupDashboardForUser(currentUser);
          } else {
              // Redirect to login if not authenticated
              window.location.href = 'login.html';
              return;
          }
      } else {
          // Wait for auth system to load
          setTimeout(checkAuthenticationAndSetup, 200);
          return;
      }

      // Initialize dashboard components
      initializeCharts();
      loadRecentActivity();
      updateWelcomeStats();
      setupSearchFunctionality();
      
      // Set up auto-refresh
      setInterval(updateWelcomeStats, 30000);
      setInterval(loadRecentActivity, 60000);
      
      console.log('‚úÖ Dashboard Ready');
  }

  function setupDashboardForUser(user) {
      // Update user info in header
      updateUserInfo(user);
      
      // Update welcome message
      updateWelcomeMessage(user);
      
      // Show/hide admin features
      toggleAdminFeatures(user);
      
      // Track dashboard access
      trackDashboardAccess(user);
  }

  function updateUserInfo(user) {
      const userAvatar = document.getElementById('userAvatar');
      const userName = document.getElementById('userName');
      const userEmail = document.getElementById('userEmail');
      
      if (userAvatar) {
          userAvatar.textContent = user.fullName.charAt(0).toUpperCase();
      }
      
      if (userName) {
          userName.textContent = user.fullName;
      }
      
      if (userEmail) {
          userEmail.textContent = user.email;
      }
  }

  function updateWelcomeMessage(user) {
      const welcomeTitle = document.getElementById('welcomeTitle');
      if (welcomeTitle) {
          const timeOfDay = getTimeOfDay();
          welcomeTitle.textContent = `${timeOfDay}, ${user.fullName}!`;
      }
  }

  function getTimeOfDay() {
      const hour = new Date().getHours();
      if (hour < 12) return 'Good Morning';
      if (hour < 17) return 'Good Afternoon';
      return 'Good Evening';
  }

  function toggleAdminFeatures(user) {
      const adminHubCard = document.getElementById('adminHubCard');
      const adminQuickAction = document.getElementById('adminQuickAction');
      
      if (user.accessLevel === 'enterprise') {
          if (adminHubCard) adminHubCard.style.display = 'block';
          if (adminQuickAction) adminQuickAction.style.display = 'flex';
      } else {
          if (adminHubCard) adminHubCard.style.display = 'none';
          if (adminQuickAction) adminQuickAction.style.display = 'none';
      }
  }

  function trackDashboardAccess(user) {
      if (window.SESMineDataManager && window.SESMineDataManager.instance) {
          window.SESMineDataManager.instance.trackEvent('dashboard_access', {
              userId: user.id,
              accessLevel: user.accessLevel,
              timestamp: new Date().toISOString()
          });
      }
  }

  // Initialize Charts
  function initializeCharts() {
      setTimeout(() => {
          initializeUsageChart();
          initializeHubChart();
      }, 500);
  }

  function initializeUsageChart() {
      const ctx = document.getElementById('usageChart');
      if (!ctx) return;

      const labels = [];
      const data = [];
      
      // Generate last 7 days data
      for (let i = 6; i >= 0; i--) {
          const date = new Date();
          date.setDate(date.getDate() - i);
          labels.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
          data.push(Math.floor(Math.random() * 100) + 50);
      }

      dashboardCharts.usage = new Chart(ctx, {
          type: 'line',
          data: {
              labels: labels,
              datasets: [{
                  label: 'Platform Usage',
                  data: data,
                  borderColor: '#5c6b50',
                  backgroundColor: 'rgba(92, 107, 80, 0.1)',
                  borderWidth: 3,
                  fill: true,
                  tension: 0.4
              }]
          },
          options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                  legend: {
                      display: false
                  }
              },
              scales: {
                  y: {
                      beginAtZero: true,
                      grid: {
                          color: 'rgba(0, 0, 0, 0.1)'
                      }
                  },
                  x: {
                      grid: {
                          display: false
                      }
                  }
              }
          }
      });
  }

  function initializeHubChart() {
      const ctx = document.getElementById('hubChart');
      if (!ctx) return;

      dashboardCharts.hub = new Chart(ctx, {
          type: 'doughnut',
          data: {
              labels: ['Engineering', 'Analytics', 'Economics', 'Innovation', 'Procurement', 'Consulting', 'Training'],
              datasets: [{
                  data: [25, 20, 15, 12, 10, 10, 8],
                  backgroundColor: [
                      '#5c6b50',
                      '#38a169',
                      '#d69e2e',
                      '#3182ce',
                      '#dd6b20',
                      '#e53e3e',
                      '#10b981'
                  ],
                  borderWidth: 0
              }]
          },
          options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                  legend: {
                      position: 'bottom',
                      labels: {
                          padding: 20,
                          usePointStyle: true
                      }
                  }
              }
          }
      });
  }

  // Load Recent Activity
  function loadRecentActivity() {
      const activityList = document.getElementById('activityList');
      if (!activityList) return;

      // Simulate loading recent activity
      const activities = [
          {
              icon: 'fas fa-calculator',
              color: '#5c6b50',
              text: 'Cost estimation completed for Copper Mine Project',
              time: '2 hours ago'
          },
          {
              icon: 'fas fa-chart-line',
              color: '#38a169',
              text: 'Analytics report generated for Q4 performance',
              time: '4 hours ago'
          },
          {
              icon: 'fas fa-shopping-cart',
              color: '#d69e2e',
              text: 'Procurement request submitted for mining equipment',
              time: '6 hours ago'
          },
          {
              icon: 'fas fa-graduation-cap',
              color: '#10b981',
              text: 'Training module completed: Safety Protocols',
              time: '1 day ago'
          },
          {
              icon: 'fas fa-handshake',
              color: '#e53e3e',
              text: 'Consulting session scheduled with mining expert',
              time: '2 days ago'
          }
      ];

      const activityHTML = activities.map(activity => `
          <li class="activity-item" onclick="showActivityDetails('${activity.text}')">
              <div class="activity-icon" style="background: ${activity.color};">
                  <i class="${activity.icon}"></i>
              </div>
              <div class="activity-content">
                  <div class="activity-text">${activity.text}</div>
                  <div class="activity-time">${activity.time}</div>
              </div>
          </li>
      `).join('');

      activityList.innerHTML = activityHTML;
  }

  // Update Welcome Stats
  function updateWelcomeStats() {
      const stats = {
          uptime: document.getElementById('systemUptime'),
          costSaved: document.getElementById('costSaved')
      };

      if (stats.uptime) {
          const uptime = (99.85 + Math.random() * 0.14).toFixed(1);
          stats.uptime.textContent = uptime + '%';
      }

      if (stats.costSaved) {
          const saved = (5.2 + Math.random() * 0.3).toFixed(1);
          stats.costSaved.textContent = '$' + saved + 'M';
      }
  }

  // Navigation Functions
  function navigateToHub(url, hubName) {
      // Track hub access
      if (window.SESMineDataManager && window.SESMineDataManager.instance) {
          window.SESMineDataManager.instance.trackEvent('hub_navigation', {
              hubName: hubName,
              url: url,
              timestamp: new Date().toISOString()
          });
      }

      // Check permissions if needed
      const currentUser = window.SESMineAuth?.instance?.currentUser;
      if (currentUser && url === 'admin-dashboard.html' && currentUser.accessLevel !== 'enterprise') {
          if (window.showWarning) {
              window.showWarning('Admin access requires Enterprise level permissions.');
          }
          return;
      }

      // Navigate to hub
      window.location.href = url;
  }

  function trackQuickAction(action) {
      if (window.SESMineDataManager && window.SESMineDataManager.instance) {
          window.SESMineDataManager.instance.trackEvent('quick_action', {
              action: action,
              timestamp: new Date().toISOString()
          });
      }
  }

  // Interactive Functions
  function showHubsOverview() {
      if (window.showInfo) {
          window.showInfo('8 specialized hubs available for comprehensive mining solutions.');
      }
  }

  function showSupportInfo() {
      if (window.showInfo) {
          window.showInfo('24/7 professional support available for all platform users.');
      }
  }

  function showUptimeStats() {
      if (window.showInfo) {
          window.showInfo('System uptime is monitored continuously with 99.9% availability target.');
      }
  }

  function showCostSavings() {
      if (window.showInfo) {
          window.showInfo('Total cost savings achieved through platform optimization and efficiency improvements.');
      }
  }

  function showActivityDetails(activity) {
      if (window.showInfo) {
          window.showInfo(`Activity: ${activity}`);
      }
  }

  function showNotifications() {
      if (window.showInfo) {
          window.showInfo('No new notifications at this time.');
      }
  }

  // Search Functionality
  function setupSearchFunctionality() {
      const searchInput = document.getElementById('globalSearch');
      if (!searchInput) return;

      searchInput.addEventListener('input', function(e) {
          const query = e.target.value.toLowerCase();
          if (query.length < 2) return;

          // Simple search implementation
          const searchResults = [
              { name: 'Engineering Hub', url: 'engineering-hub.html' },
              { name: 'Analytics Platform', url: 'analytics-platform.html' },
              { name: 'Economics Hub', url: 'economics-hub.html' },
              { name: 'Cost Estimation', url: 'engineering-hub.html' },
              { name: 'Training Center', url: 'training-education-hub.html' }
          ].filter(item => item.name.toLowerCase().includes(query));

          // Show search suggestions (simplified)
          console.log('Search results:', searchResults);
      });

      searchInput.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
              const query = e.target.value.toLowerCase();
              performSearch(query);
          }
      });
  }

  function performSearch(query) {
      // Track search
      if (window.SESMineDataManager && window.SESMineDataManager.instance) {
          window.SESMineDataManager.instance.trackEvent('dashboard_search', {
              query: query,
              timestamp: new Date().toISOString()
          });
      }

      // Simple search routing
      if (query.includes('engineering') || query.includes('cost')) {
          window.location.href = 'engineering-hub.html';
      } else if (query.includes('analytics') || query.includes('chart')) {
          window.location.href = 'analytics-platform.html';
      } else if (query.includes('economics') || query.includes('financial')) {
          window.location.href = 'economics-hub.html';
        } else if (query.includes('training') || query.includes('education')) {
            window.location.href = 'training-education-hub.html';
        } else if (query.includes('procurement') || query.includes('supplier')) {
            window.location.href = 'procurement-hub.html';
        } else if (query.includes('consulting') || query.includes('expert')) {
            window.location.href = 'consulting-hub.html';
        } else if (query.includes('innovation') || query.includes('technology')) {
            window.location.href = 'innovation-technology-hub.html';
        } else if (query.includes('admin') || query.includes('management')) {
            const currentUser = window.SESMineAuth?.instance?.currentUser;
            if (currentUser && currentUser.accessLevel === 'enterprise') {
                window.location.href = 'admin-dashboard.html';
            } else {
                if (window.showWarning) {
                    window.showWarning('Admin access requires Enterprise level permissions.');
                }
            }
        } else {
            if (window.showInfo) {
                window.showInfo(`No results found for "${query}". Try searching for hub names or features.`);
            }
        }
    }

    // Logout Function
    function logout() {
        if (window.SESMineAuth && window.SESMineAuth.instance) {
            window.SESMineAuth.instance.logout();
        } else {
            window.location.href = 'login.html';
        }
    }

    // Keyboard Shortcuts
    document.addEventListener('keydown', function(e) {
        // Ctrl/Cmd + K for search
        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
            e.preventDefault();
            const searchInput = document.getElementById('globalSearch');
            if (searchInput) {
                searchInput.focus();
            }
        }

        // Ctrl/Cmd + H for home
        if ((e.ctrlKey || e.metaKey) && e.key === 'h') {
            e.preventDefault();
            window.location.reload();
        }

        // Ctrl/Cmd + 1-8 for quick hub access
        if ((e.ctrlKey || e.metaKey) && e.key >= '1' && e.key <= '8') {
            e.preventDefault();
            const hubUrls = [
                'engineering-hub.html',
                'analytics-platform.html',
                'economics-hub.html',
                'innovation-technology-hub.html',
                'procurement-hub.html',
                'consulting-hub.html',
                'training-education-hub.html',
                'admin-dashboard.html'
            ];
            
            const hubIndex = parseInt(e.key) - 1;
            if (hubUrls[hubIndex]) {
                const currentUser = window.SESMineAuth?.instance?.currentUser;
                if (hubIndex === 7 && currentUser && currentUser.accessLevel !== 'enterprise') {
                    if (window.showWarning) {
                        window.showWarning('Admin access requires Enterprise level permissions.');
                    }
                    return;
                }
                window.location.href = hubUrls[hubIndex];
            }
        }
    });

    // Mobile Menu Toggle
    function toggleMobileMenu() {
        const mainNav = document.getElementById('mainNav');
        if (mainNav) {
            mainNav.classList.toggle('mobile-open');
        }
    }

    // Resize Handler
    window.addEventListener('resize', function() {
        // Resize charts if they exist
        Object.values(dashboardCharts).forEach(chart => {
            if (chart && typeof chart.resize === 'function') {
                chart.resize();
            }
        });
    });

    // Visibility Change Handler (for performance optimization)
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            // Pause animations and updates when tab is not visible
            Object.values(dashboardCharts).forEach(chart => {
                if (chart && chart.options && chart.options.animation) {
                    chart.options.animation.duration = 0;
                }
            });
        } else {
            // Resume animations when tab becomes visible
            Object.values(dashboardCharts).forEach(chart => {
                if (chart && chart.options && chart.options.animation) {
                    chart.options.animation.duration = 750;
                }
            });
            
            // Refresh data when returning to tab
            updateWelcomeStats();
            loadRecentActivity();
        }
    });

    // Error Handling
    window.addEventListener('error', function(e) {
        console.error('Dashboard error:', e.error);
        if (window.showError) {
            window.showError('An error occurred. Please refresh the page if issues persist.');
        }
    });

    // Unhandled Promise Rejection Handler
    window.addEventListener('unhandledrejection', function(e) {
        console.error('Unhandled promise rejection:', e.reason);
        if (window.showError) {
            window.showError('A system error occurred. Please try again.');
        }
    });

    // Performance Monitoring
    window.addEventListener('load', function() {
        // Log performance metrics
        if (window.performance && window.performance.timing) {
            const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
            console.log(`üöÄ Dashboard loaded in ${loadTime}ms`);
            
            // Track performance
            if (window.SESMineDataManager && window.SESMineDataManager.instance) {
                window.SESMineDataManager.instance.trackEvent('dashboard_performance', {
                    loadTime: loadTime,
                    timestamp: new Date().toISOString()
                });
            }
        }
    });

    // Export dashboard functions for external use
    window.dashboardFunctions = {
        navigateToHub,
        trackQuickAction,
        updateWelcomeStats,
        loadRecentActivity,
        performSearch,
        logout,
        toggleMobileMenu
    };

    console.log('üè† SESMine Dashboard JavaScript Loaded');
    console.log('üìä Real-time analytics enabled');
    console.log('üîç Search functionality active');
    console.log('‚å®Ô∏è Keyboard shortcuts: Ctrl+K (search), Ctrl+H (home), Ctrl+1-8 (hubs)');
    console.log('üì± Mobile responsive design ready');
    console.log('üéØ Hub interactions and tracking initialized');
    console.log('‚úÖ Dashboard fully operational');
    </script>
</body>
</html>
